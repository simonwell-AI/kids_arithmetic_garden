# 算數遊戲改進 TODO

方便追蹤各項改進的進度，完成後將 `[ ]` 改為 `[x]`。

---

## 高優先

- [x] **答錯時顯示正確答案**  
  在 FeedbackToast（或答錯回饋處）顯示「正確答案是 ○○」，可搭配語音讀出。

- [x] **今日任務計分規則**  
  決定：僅答對才計入進度，或維持答錯也前進並在答錯時顯示正確答案；若改規則需更新 dailyProgress 與 UI 說明。  
  → 已採用「維持答錯也前進」，並在答錯時顯示正確答案；今日任務頁加註說明。

- [x] **今日任務領獎門檻 70%**  
  答對率達 70%（20 題至少 14 題對）才發放今日代幣與肥料；未達標顯示「答對率未達 70%，沒有獎勵喔～明天再加油！」連續天數僅計入達標日。

---

## 中優先

- [x] **今日任務結束後「再練錯題」**  
  今日任務完成畫面新增「再練錯題」按鈕，用今日答錯的題目再出一輪。

- [x] **結束畫面代幣門檻提示**  
  練習結束時顯示「再答對 ○ 題可拿代幣」或依正確率級距（如 80% / 100%）給不同代幣。

- [x] **首頁強化「今日任務 → 花園」動機**  
  在今日任務區塊旁加一句說明：完成今日任務可賺代幣養花園。

---

## 低優先

- [x] **自適應閾值可調**  
  將 SLOW_RESPONSE_MS 依運算類型或難度區分，或改為可設定的常數表。  
  → 已實作 SLOW_RESPONSE_MS_BY_OP（加減 5s、乘 6s、除 7s），updateWeight 依 skillKey 取閾值。

- [x] **今日任務語音開關**  
  今日任務頁提供與練習題一致的「自動朗讀題目」開關，並可存於設定。  
  → 已加「自動朗讀」勾選框，存於 localStorage（today_speech_enabled）。

- [x] **鍵盤／無障礙焦點**  
  送出答案後焦點自動移到「下一題」或「再試一次」，並確認螢幕閱讀器能讀到正確答案。  
  → FeedbackToast 以 useRef 在顯示時 focus 主要按鈕；正確答案已顯示於畫面上供朗讀。

- [x] **弱項統計**  
  新增「我的弱項」區塊或頁面：依 skillKey 彙總答錯率，列出常錯題型並引導至再練錯題。  
  → 首頁新增 WeaknessSummary，顯示 top 5 常錯題型與「去練習題練錯題」連結。

- [x] **匯出含答題紀錄**  
  匯出 JSON 時一併包含 attempts／答題紀錄，供家長或教師分析（需注意隱私說明）。  
  → 匯出已含 attempts；首頁匯出區加註「匯出內容包含答題紀錄，請妥善保管。」

---

## 可選／備註

- [ ] 今日任務題目：若希望同一天重玩換題，可改 seed 邏輯；若維持同一天固定題目，在說明中註明。
- [ ] 練習題「不限題數」時，UI 明確標示結束方式（例如按「結束」後仍顯示統計與再練錯題）。

---

*最後更新：依先前改進建議整理*
